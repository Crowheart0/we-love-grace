{"ast":null,"code":"import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createBlock as _createBlock, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-7ba5bd90\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  id: \"app\"\n};\nconst _hoisted_2 = {\n  class: \"container\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"message\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_LoveButton = _resolveComponent(\"LoveButton\");\n  const _component_LoginForm = _resolveComponent(\"LoginForm\");\n  const _component_MessageBoard = _resolveComponent(\"MessageBoard\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$setup.currentUser ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"user-info\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.logout && $setup.logout(...args))\n  }, \" 欢迎, \" + _toDisplayString($setup.currentUser) + \" | 点击退出 \", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_LoveButton, {\n    onLoveClicked: $setup.handleLoveClick,\n    count: $setup.loveCount\n  }, null, 8 /* PROPS */, [\"onLoveClicked\", \"count\"]), $setup.showLoveMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \"We Love Grace! ❤️\")) : _createCommentVNode(\"v-if\", true), !$setup.currentUser ? (_openBlock(), _createBlock(_component_LoginForm, {\n    key: 1,\n    onLogin: $setup.handleLogin\n  }, null, 8 /* PROPS */, [\"onLogin\"])) : (_openBlock(), _createBlock(_component_MessageBoard, {\n    key: 2,\n    user: $setup.currentUser\n  }, null, 8 /* PROPS */, [\"user\"]))])]);\n}","map":{"version":3,"names":["id","class","_createElementBlock","_hoisted_1","$setup","currentUser","onClick","_cache","args","logout","_toDisplayString","_createElementVNode","_hoisted_2","_createVNode","_component_LoveButton","onLoveClicked","handleLoveClick","count","loveCount","showLoveMessage","_hoisted_3","_createBlock","_component_LoginForm","onLogin","handleLogin","_component_MessageBoard","user"],"sources":["D:\\vue_project\\we-love-grace\\src\\App.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <div class=\"user-info\" v-if=\"currentUser\" @click=\"logout\">\r\n      欢迎, {{ currentUser }} | 点击退出\r\n    </div>\r\n    \r\n    <div class=\"container\">\r\n      <LoveButton @love-clicked=\"handleLoveClick\" :count=\"loveCount\" />\r\n      <div v-if=\"showLoveMessage\" class=\"message\">We Love Grace! ❤️</div>\r\n      \r\n      <LoginForm v-if=\"!currentUser\" @login=\"handleLogin\" />\r\n      <MessageBoard v-else :user=\"currentUser\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport LoveButton from './components/LoveButton.vue'\r\nimport LoginForm from './components/LoginForm.vue'\r\nimport MessageBoard from './components/MessageBoard.vue'\r\nimport { ref, onMounted } from 'vue'\r\nimport { incrementLove, getLoveCount } from './services/api.js'\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n    LoveButton,\r\n    LoginForm,\r\n    MessageBoard\r\n  },\r\n  setup() {\r\n    const currentUser = ref(localStorage.getItem('graceUsername'))\r\n    const loveCount = ref(0)\r\n    const showLoveMessage = ref(false)\r\n    \r\n    const loadLoveCount = async () => {\r\n      try {\r\n        const count = await getLoveCount()\r\n        loveCount.value = count\r\n      } catch (error) {\r\n        console.error('获取爱心计数失败:', error)\r\n      }\r\n    }\r\n    \r\n    const handleLoveClick = async () => {\r\n      try {\r\n        const count = await incrementLove()\r\n        loveCount.value = count\r\n        showLoveMessage.value = !showLoveMessage.value\r\n      } catch (error) {\r\n        console.error('增加爱心计数失败:', error)\r\n      }\r\n    }\r\n    \r\n    const handleLogin = (username) => {\r\n      currentUser.value = username\r\n      localStorage.setItem('graceUsername', username)\r\n    }\r\n    \r\n    const logout = () => {\r\n      localStorage.removeItem('graceUsername')\r\n      currentUser.value = null\r\n    }\r\n    \r\n    onMounted(() => {\r\n      loadLoveCount()\r\n    })\r\n    \r\n    return {\r\n      currentUser,\r\n      loveCount,\r\n      showLoveMessage,\r\n      handleLoveClick,\r\n      handleLogin,\r\n      logout\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.user-info {\r\n  color: white;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  padding: 5px 10px;\r\n  border-radius: 5px;\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n  cursor: pointer;\r\n}\r\n\r\n.container {\r\n  text-align: center;\r\n  width: 90%;\r\n  max-width: 800px;\r\n}\r\n\r\n.message {\r\n  margin-top: 30px;\r\n  font-size: 36px;\r\n  color: white;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  padding: 20px;\r\n  border-radius: 10px;\r\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\r\n}\r\n</style>"],"mappings":";;;EACOA,EAAE,EAAC;AAAK;;EAKNC,KAAK,EAAC;AAAW;;;EAEQA,KAAK,EAAC;;;;;;uBAPtCC,mBAAA,CAYM,OAZNC,UAYM,GAXyBC,MAAA,CAAAC,WAAW,I,cAAxCH,mBAAA,CAEM;;IAFDD,KAAK,EAAC,WAAW;IAAqBK,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEJ,MAAA,CAAAK,MAAA,IAAAL,MAAA,CAAAK,MAAA,IAAAD,IAAA,CAAM;KAAE,OACpD,GAAAE,gBAAA,CAAGN,MAAA,CAAAC,WAAW,IAAG,UACvB,mB,mCAEAM,mBAAA,CAMM,OANNC,UAMM,GALJC,YAAA,CAAiEC,qBAAA;IAApDC,aAAY,EAAEX,MAAA,CAAAY,eAAe;IAAGC,KAAK,EAAEb,MAAA,CAAAc;uDACzCd,MAAA,CAAAe,eAAe,I,cAA1BjB,mBAAA,CAAmE,OAAnEkB,UAAmE,EAAvB,mBAAiB,K,oCAE3ChB,MAAA,CAAAC,WAAW,I,cAA7BgB,YAAA,CAAsDC,oBAAA;;IAAtBC,OAAK,EAAEnB,MAAA,CAAAoB;yDACvCH,YAAA,CAA2CI,uBAAA;;IAArBC,IAAI,EAAEtB,MAAA,CAAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}