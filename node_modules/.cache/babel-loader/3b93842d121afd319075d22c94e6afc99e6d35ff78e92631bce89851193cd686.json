{"ast":null,"code":"import { ref } from 'vue';\nimport { loginUser } from '../services/api.js';\nexport default {\n  name: 'LoginForm',\n  emits: ['login', 'switch-to-register'],\n  setup(props, {\n    emit\n  }) {\n    const username = ref('');\n    const isLoading = ref(false);\n    const errorMessage = ref('');\n    const handleLogin = async () => {\n      if (username.value.trim() === '') {\n        errorMessage.value = '请输入用户名';\n        return;\n      }\n      isLoading.value = true;\n      errorMessage.value = '';\n      try {\n        const result = await loginUser(username.value.trim());\n        emit('login', result.user.username);\n        username.value = '';\n      } catch (error) {\n        errorMessage.value = error.message;\n      } finally {\n        isLoading.value = false;\n      }\n    };\n    return {\n      username,\n      isLoading,\n      errorMessage,\n      handleLogin\n    };\n  }\n};","map":{"version":3,"names":["ref","loginUser","name","emits","setup","props","emit","username","isLoading","errorMessage","handleLogin","value","trim","result","user","error","message"],"sources":["D:\\vue_project\\we-love-grace\\src\\components\\LoginForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-form\">\r\n    <h2>欢迎来到 Grace 的留言板</h2>\r\n    <p>请输入您的用户名登录</p>\r\n    <input \r\n      v-model=\"username\" \r\n      type=\"text\" \r\n      placeholder=\"用户名\" \r\n      @keyup.enter=\"handleLogin\"\r\n      :disabled=\"isLoading\"\r\n      required\r\n    >\r\n    <div class=\"button-group\">\r\n      <button @click=\"handleLogin\" :disabled=\"isLoading\">\r\n        {{ isLoading ? '登录中...' : '登录' }}\r\n      </button>\r\n      <button @click=\"$emit('switch-to-register')\" class=\"secondary\">\r\n        没有账号？去注册\r\n      </button>\r\n    </div>\r\n    <div v-if=\"errorMessage\" class=\"error-message\">\r\n      {{ errorMessage }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { loginUser } from '../services/api.js'\r\n\r\nexport default {\r\n  name: 'LoginForm',\r\n  emits: ['login', 'switch-to-register'],\r\n  setup(props, { emit }) {\r\n    const username = ref('')\r\n    const isLoading = ref(false)\r\n    const errorMessage = ref('')\r\n    \r\n    const handleLogin = async () => {\r\n      if (username.value.trim() === '') {\r\n        errorMessage.value = '请输入用户名'\r\n        return\r\n      }\r\n      \r\n      isLoading.value = true\r\n      errorMessage.value = ''\r\n      \r\n      try {\r\n        const result = await loginUser(username.value.trim())\r\n        emit('login', result.user.username)\r\n        username.value = ''\r\n      } catch (error) {\r\n        errorMessage.value = error.message\r\n      } finally {\r\n        isLoading.value = false\r\n      }\r\n    }\r\n    \r\n    return {\r\n      username,\r\n      isLoading,\r\n      errorMessage,\r\n      handleLogin\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login-form {\r\n  margin-top: 30px;\r\n  background-color: rgba(255, 255, 255, 0.9);\r\n  padding: 20px;\r\n  border-radius: 10px;\r\n  text-align: left;\r\n}\r\n\r\n.login-form h2 {\r\n  color: #e91e63;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.login-form input {\r\n  width: 100%;\r\n  padding: 10px;\r\n  margin: 10px 0;\r\n  border: 2px solid #e91e63;\r\n  border-radius: 5px;\r\n  font-size: 16px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.button-group {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-top: 15px;\r\n}\r\n\r\n.login-form button {\r\n  flex: 1;\r\n  padding: 10px 20px;\r\n  background-color: #e91e63;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.login-form button:hover:not(:disabled) {\r\n  background-color: #c2185b;\r\n}\r\n\r\n.login-form button:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.login-form button.secondary {\r\n  background-color: #666;\r\n}\r\n\r\n.login-form button.secondary:hover:not(:disabled) {\r\n  background-color: #555;\r\n}\r\n\r\n.error-message {\r\n  color: #f44336;\r\n  margin-top: 10px;\r\n  padding: 8px;\r\n  background-color: #ffebee;\r\n  border-radius: 4px;\r\n  border-left: 4px solid #f44336;\r\n}\r\n</style>"],"mappings":"AA2BA,SAASA,GAAE,QAAS,KAAI;AACxB,SAASC,SAAQ,QAAS,oBAAmB;AAE7C,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,KAAK,EAAE,CAAC,OAAO,EAAE,oBAAoB,CAAC;EACtCC,KAAKA,CAACC,KAAK,EAAE;IAAEC;EAAK,CAAC,EAAE;IACrB,MAAMC,QAAO,GAAIP,GAAG,CAAC,EAAE;IACvB,MAAMQ,SAAQ,GAAIR,GAAG,CAAC,KAAK;IAC3B,MAAMS,YAAW,GAAIT,GAAG,CAAC,EAAE;IAE3B,MAAMU,WAAU,GAAI,MAAAA,CAAA,KAAY;MAC9B,IAAIH,QAAQ,CAACI,KAAK,CAACC,IAAI,CAAC,MAAM,EAAE,EAAE;QAChCH,YAAY,CAACE,KAAI,GAAI,QAAO;QAC5B;MACF;MAEAH,SAAS,CAACG,KAAI,GAAI,IAAG;MACrBF,YAAY,CAACE,KAAI,GAAI,EAAC;MAEtB,IAAI;QACF,MAAME,MAAK,GAAI,MAAMZ,SAAS,CAACM,QAAQ,CAACI,KAAK,CAACC,IAAI,CAAC,CAAC;QACpDN,IAAI,CAAC,OAAO,EAAEO,MAAM,CAACC,IAAI,CAACP,QAAQ;QAClCA,QAAQ,CAACI,KAAI,GAAI,EAAC;MACpB,EAAE,OAAOI,KAAK,EAAE;QACdN,YAAY,CAACE,KAAI,GAAII,KAAK,CAACC,OAAM;MACnC,UAAU;QACRR,SAAS,CAACG,KAAI,GAAI,KAAI;MACxB;IACF;IAEA,OAAO;MACLJ,QAAQ;MACRC,SAAS;MACTC,YAAY;MACZC;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}