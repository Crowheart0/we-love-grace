{"ast":null,"code":"import { ref } from 'vue';\nimport { registerUser } from '../services/api.js';\nexport default {\n  name: 'RegisterForm',\n  emits: ['register-success', 'switch-to-login'],\n  setup(props, {\n    emit\n  }) {\n    const username = ref('');\n    const isLoading = ref(false);\n    const errorMessage = ref('');\n    const handleRegister = async () => {\n      if (username.value.trim().length < 2) {\n        errorMessage.value = '用户名至少需要2个字符';\n        return;\n      }\n      isLoading.value = true;\n      errorMessage.value = '';\n      try {\n        const result = await registerUser(username.value.trim());\n        emit('register-success', result.user);\n        username.value = '';\n      } catch (error) {\n        errorMessage.value = error.message;\n      } finally {\n        isLoading.value = false;\n      }\n    };\n    return {\n      username,\n      isLoading,\n      errorMessage,\n      handleRegister\n    };\n  }\n};","map":{"version":3,"names":["ref","registerUser","name","emits","setup","props","emit","username","isLoading","errorMessage","handleRegister","value","trim","length","result","user","error","message"],"sources":["D:\\vue_project\\we-love-grace\\src\\components\\RegisterForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"register-form\">\r\n    <h2>注册新用户</h2>\r\n    <p>请输入您的用户名进行注册</p>\r\n    <input \r\n      v-model=\"username\" \r\n      type=\"text\" \r\n      placeholder=\"用户名（2-50个字符）\" \r\n      @keyup.enter=\"handleRegister\"\r\n      :disabled=\"isLoading\"\r\n      required\r\n    >\r\n    <div class=\"button-group\">\r\n      <button @click=\"handleRegister\" :disabled=\"isLoading\">\r\n        {{ isLoading ? '注册中...' : '注册' }}\r\n      </button>\r\n      <button @click=\"$emit('switch-to-login')\" class=\"secondary\">\r\n        已有账号？去登录\r\n      </button>\r\n    </div>\r\n    <div v-if=\"errorMessage\" class=\"error-message\">\r\n      {{ errorMessage }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { registerUser } from '../services/api.js'\r\n\r\nexport default {\r\n  name: 'RegisterForm',\r\n  emits: ['register-success', 'switch-to-login'],\r\n  setup(props, { emit }) {\r\n    const username = ref('')\r\n    const isLoading = ref(false)\r\n    const errorMessage = ref('')\r\n    \r\n    const handleRegister = async () => {\r\n      if (username.value.trim().length < 2) {\r\n        errorMessage.value = '用户名至少需要2个字符'\r\n        return\r\n      }\r\n      \r\n      isLoading.value = true\r\n      errorMessage.value = ''\r\n      \r\n      try {\r\n        const result = await registerUser(username.value.trim())\r\n        emit('register-success', result.user)\r\n        username.value = ''\r\n      } catch (error) {\r\n        errorMessage.value = error.message\r\n      } finally {\r\n        isLoading.value = false\r\n      }\r\n    }\r\n    \r\n    return {\r\n      username,\r\n      isLoading,\r\n      errorMessage,\r\n      handleRegister\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.register-form {\r\n  margin-top: 30px;\r\n  background-color: rgba(255, 255, 255, 0.9);\r\n  padding: 20px;\r\n  border-radius: 10px;\r\n  text-align: left;\r\n}\r\n\r\n.register-form h2 {\r\n  color: #e91e63;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.register-form input {\r\n  width: 100%;\r\n  padding: 10px;\r\n  margin: 10px 0;\r\n  border: 2px solid #e91e63;\r\n  border-radius: 5px;\r\n  font-size: 16px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.button-group {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-top: 15px;\r\n}\r\n\r\n.register-form button {\r\n  flex: 1;\r\n  padding: 10px 20px;\r\n  background-color: #e91e63;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.register-form button:hover:not(:disabled) {\r\n  background-color: #c2185b;\r\n}\r\n\r\n.register-form button:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.register-form button.secondary {\r\n  background-color: #666;\r\n}\r\n\r\n.register-form button.secondary:hover:not(:disabled) {\r\n  background-color: #555;\r\n}\r\n\r\n.error-message {\r\n  color: #f44336;\r\n  margin-top: 10px;\r\n  padding: 8px;\r\n  background-color: #ffebee;\r\n  border-radius: 4px;\r\n  border-left: 4px solid #f44336;\r\n}\r\n</style>"],"mappings":"AA2BA,SAASA,GAAE,QAAS,KAAI;AACxB,SAASC,YAAW,QAAS,oBAAmB;AAEhD,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,KAAK,EAAE,CAAC,kBAAkB,EAAE,iBAAiB,CAAC;EAC9CC,KAAKA,CAACC,KAAK,EAAE;IAAEC;EAAK,CAAC,EAAE;IACrB,MAAMC,QAAO,GAAIP,GAAG,CAAC,EAAE;IACvB,MAAMQ,SAAQ,GAAIR,GAAG,CAAC,KAAK;IAC3B,MAAMS,YAAW,GAAIT,GAAG,CAAC,EAAE;IAE3B,MAAMU,cAAa,GAAI,MAAAA,CAAA,KAAY;MACjC,IAAIH,QAAQ,CAACI,KAAK,CAACC,IAAI,CAAC,CAAC,CAACC,MAAK,GAAI,CAAC,EAAE;QACpCJ,YAAY,CAACE,KAAI,GAAI,aAAY;QACjC;MACF;MAEAH,SAAS,CAACG,KAAI,GAAI,IAAG;MACrBF,YAAY,CAACE,KAAI,GAAI,EAAC;MAEtB,IAAI;QACF,MAAMG,MAAK,GAAI,MAAMb,YAAY,CAACM,QAAQ,CAACI,KAAK,CAACC,IAAI,CAAC,CAAC;QACvDN,IAAI,CAAC,kBAAkB,EAAEQ,MAAM,CAACC,IAAI;QACpCR,QAAQ,CAACI,KAAI,GAAI,EAAC;MACpB,EAAE,OAAOK,KAAK,EAAE;QACdP,YAAY,CAACE,KAAI,GAAIK,KAAK,CAACC,OAAM;MACnC,UAAU;QACRT,SAAS,CAACG,KAAI,GAAI,KAAI;MACxB;IACF;IAEA,OAAO;MACLJ,QAAQ;MACRC,SAAS;MACTC,YAAY;MACZC;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}