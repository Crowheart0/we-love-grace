{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-6626deb7\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"register-form\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"注册新用户\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"请输入您的用户名进行注册\", -1 /* HOISTED */));\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = {\n  class: \"button-group\"\n};\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = {\n  key: 0,\n  class: \"error-message\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.username = $event),\n    type: \"text\",\n    placeholder: \"用户名（2-50个字符）\",\n    onKeyup: _cache[1] || (_cache[1] = _withKeys((...args) => $setup.handleRegister && $setup.handleRegister(...args), [\"enter\"])),\n    disabled: $setup.isLoading,\n    required: \"\"\n  }, null, 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_4), [[_vModelText, $setup.username]]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $setup.handleRegister && $setup.handleRegister(...args)),\n    disabled: $setup.isLoading\n  }, _toDisplayString($setup.isLoading ? '注册中...' : '注册'), 9 /* TEXT, PROPS */, _hoisted_6), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = $event => _ctx.$emit('switch-to-login')),\n    class: \"secondary\"\n  }, \" 已有账号？去登录 \")]), $setup.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _toDisplayString($setup.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","$setup","username","$event","type","placeholder","onKeyup","_cache","_withKeys","args","handleRegister","disabled","isLoading","required","_hoisted_5","onClick","_hoisted_6","_ctx","$emit","errorMessage","_hoisted_7","_toDisplayString"],"sources":["D:\\vue_project\\we-love-grace\\src\\components\\RegisterForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"register-form\">\r\n    <h2>注册新用户</h2>\r\n    <p>请输入您的用户名进行注册</p>\r\n    <input \r\n      v-model=\"username\" \r\n      type=\"text\" \r\n      placeholder=\"用户名（2-50个字符）\" \r\n      @keyup.enter=\"handleRegister\"\r\n      :disabled=\"isLoading\"\r\n      required\r\n    >\r\n    <div class=\"button-group\">\r\n      <button @click=\"handleRegister\" :disabled=\"isLoading\">\r\n        {{ isLoading ? '注册中...' : '注册' }}\r\n      </button>\r\n      <button @click=\"$emit('switch-to-login')\" class=\"secondary\">\r\n        已有账号？去登录\r\n      </button>\r\n    </div>\r\n    <div v-if=\"errorMessage\" class=\"error-message\">\r\n      {{ errorMessage }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue'\r\nimport { registerUser } from '../services/api.js'\r\n\r\nexport default {\r\n  name: 'RegisterForm',\r\n  emits: ['register-success', 'switch-to-login'],\r\n  setup(props, { emit }) {\r\n    const username = ref('')\r\n    const isLoading = ref(false)\r\n    const errorMessage = ref('')\r\n    \r\n    const handleRegister = async () => {\r\n      if (username.value.trim().length < 2) {\r\n        errorMessage.value = '用户名至少需要2个字符'\r\n        return\r\n      }\r\n      \r\n      isLoading.value = true\r\n      errorMessage.value = ''\r\n      \r\n      try {\r\n        const result = await registerUser(username.value.trim())\r\n        emit('register-success', result.user)\r\n        username.value = ''\r\n      } catch (error) {\r\n        errorMessage.value = error.message\r\n      } finally {\r\n        isLoading.value = false\r\n      }\r\n    }\r\n    \r\n    return {\r\n      username,\r\n      isLoading,\r\n      errorMessage,\r\n      handleRegister\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.register-form {\r\n  margin-top: 30px;\r\n  background-color: rgba(255, 255, 255, 0.9);\r\n  padding: 20px;\r\n  border-radius: 10px;\r\n  text-align: left;\r\n}\r\n\r\n.register-form h2 {\r\n  color: #e91e63;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.register-form input {\r\n  width: 100%;\r\n  padding: 10px;\r\n  margin: 10px 0;\r\n  border: 2px solid #e91e63;\r\n  border-radius: 5px;\r\n  font-size: 16px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.button-group {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-top: 15px;\r\n}\r\n\r\n.register-form button {\r\n  flex: 1;\r\n  padding: 10px 20px;\r\n  background-color: #e91e63;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.register-form button:hover:not(:disabled) {\r\n  background-color: #c2185b;\r\n}\r\n\r\n.register-form button:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.register-form button.secondary {\r\n  background-color: #666;\r\n}\r\n\r\n.register-form button.secondary:hover:not(:disabled) {\r\n  background-color: #555;\r\n}\r\n\r\n.error-message {\r\n  color: #f44336;\r\n  margin-top: 10px;\r\n  padding: 8px;\r\n  background-color: #ffebee;\r\n  border-radius: 4px;\r\n  border-left: 4px solid #f44336;\r\n}\r\n</style>"],"mappings":";;;EACOA,KAAK,EAAC;AAAe;gEACxBC,mBAAA,CAAc,YAAV,OAAK;gEACTA,mBAAA,CAAmB,WAAhB,cAAY;;;EASVD,KAAK,EAAC;AAAc;;;;EAQAA,KAAK,EAAC;;;uBAnBjCE,mBAAA,CAsBM,OAtBNC,UAsBM,GArBJC,UAAc,EACdC,UAAmB,E,gBACnBJ,mBAAA,CAOC;+DANUK,MAAA,CAAAC,QAAQ,GAAAC,MAAA;IACjBC,IAAI,EAAC,MAAM;IACXC,WAAW,EAAC,cAAc;IACzBC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,SAAA,KAAAC,IAAA,KAAQR,MAAA,CAAAS,cAAA,IAAAT,MAAA,CAAAS,cAAA,IAAAD,IAAA,CAAc;IAC3BE,QAAQ,EAAEV,MAAA,CAAAW,SAAS;IACpBC,QAAQ,EAAR;uEALSZ,MAAA,CAAAC,QAAQ,E,GAOnBN,mBAAA,CAOM,OAPNkB,UAOM,GANJlB,mBAAA,CAES;IAFAmB,OAAK,EAAAR,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAER,MAAA,CAAAS,cAAA,IAAAT,MAAA,CAAAS,cAAA,IAAAD,IAAA,CAAc;IAAGE,QAAQ,EAAEV,MAAA,CAAAW;sBACtCX,MAAA,CAAAW,SAAS,0CAAAI,UAAA,GAEdpB,mBAAA,CAES;IAFAmB,OAAK,EAAAR,MAAA,QAAAA,MAAA,MAAAJ,MAAA,IAAEc,IAAA,CAAAC,KAAK;IAAqBvB,KAAK,EAAC;KAAY,YAE5D,E,GAESM,MAAA,CAAAkB,YAAY,I,cAAvBtB,mBAAA,CAEM,OAFNuB,UAEM,EAAAC,gBAAA,CADDpB,MAAA,CAAAkB,YAAY,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}